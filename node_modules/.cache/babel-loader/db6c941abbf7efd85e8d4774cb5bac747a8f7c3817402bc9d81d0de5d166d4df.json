{"ast":null,"code":"import React,{useState,useEffect}from'react';import FinancialStats from'./FinancialStats';import{DollarSign,TrendingUp,Calendar}from'lucide-react';import{fetchTransactions}from'../supabaseClient';import'./FinancePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FinancePage=_ref=>{let{currentUserId}=_ref;const[transactions,setTransactions]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{if(!currentUserId){setLoading(false);return;}const loadTransactions=async()=>{try{setLoading(true);const data=await fetchTransactions(currentUserId);// Convert Supabase data to local format\nconst transactionsWithDates=data.map(t=>({id:t.id.toString(),type:t.type,amount:parseFloat(t.amount),category:t.category,description:t.description,date:new Date(t.created_at),user_id:t.user_id}));setTransactions(transactionsWithDates);}catch(error){console.error('Error loading transactions:',error);}finally{setLoading(false);}};loadTransactions();},[currentUserId]);// Sort transactions by date (newest first)\nconst sortedTransactions=[...transactions].sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime());if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"finance-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"finance-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Finance Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading your financial data...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"finance-content\",children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'40px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:\"Loading...\"})})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"finance-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"finance-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Finance Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Track your financial health and spending patterns\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"finance-content\",children:[/*#__PURE__*/_jsx(FinancialStats,{transactions:transactions}),/*#__PURE__*/_jsxs(\"div\",{className:\"transactions-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Transactions\"}),sortedTransactions.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"transactions-list\",children:sortedTransactions.map(transaction=>/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-item \".concat(transaction.type),children:[/*#__PURE__*/_jsx(\"div\",{className:\"transaction-icon\",children:transaction.type==='income'?/*#__PURE__*/_jsx(TrendingUp,{size:20}):/*#__PURE__*/_jsx(DollarSign,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"transaction-description\",children:transaction.description}),/*#__PURE__*/_jsx(\"div\",{className:\"transaction-category\",children:transaction.category}),/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-date\",children:[/*#__PURE__*/_jsx(Calendar,{size:14}),new Date(transaction.date).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-amount \".concat(transaction.type),children:[transaction.type==='income'?'+':'-',\"$\",transaction.amount.toFixed(2)]})]},transaction.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-transactions\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No transactions recorded yet. Start by telling ANITA about your income or expenses!\"})})]})]})]});};export default FinancePage;","map":{"version":3,"names":["React","useState","useEffect","FinancialStats","DollarSign","TrendingUp","Calendar","fetchTransactions","jsx","_jsx","jsxs","_jsxs","FinancePage","_ref","currentUserId","transactions","setTransactions","loading","setLoading","loadTransactions","data","transactionsWithDates","map","t","id","toString","type","amount","parseFloat","category","description","date","Date","created_at","user_id","error","console","sortedTransactions","sort","a","b","getTime","className","children","style","textAlign","padding","length","transaction","concat","size","toLocaleDateString","toFixed"],"sources":["C:/Users/dzm13/anita-finance-advisor/src/components/FinancePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport FinancialStats from './FinancialStats';\r\nimport { DollarSign, TrendingUp, Calendar } from 'lucide-react';\r\nimport { fetchTransactions, Transaction } from '../supabaseClient';\r\nimport './FinancePage.css';\r\n\r\ninterface LocalTransaction {\r\n  id: string;\r\n  type: 'income' | 'expense';\r\n  amount: number;\r\n  category: string;\r\n  description: string;\r\n  date: Date;\r\n  user_id?: string;\r\n}\r\n\r\ninterface FinancePageProps {\r\n  currentUserId?: string | null;\r\n}\r\n\r\nconst FinancePage: React.FC<FinancePageProps> = ({ currentUserId }) => {\r\n  const [transactions, setTransactions] = useState<LocalTransaction[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!currentUserId) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const loadTransactions = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const data = await fetchTransactions(currentUserId);\r\n        \r\n        // Convert Supabase data to local format\r\n        const transactionsWithDates = data.map((t: any) => ({\r\n          id: t.id.toString(),\r\n          type: t.type,\r\n          amount: parseFloat(t.amount),\r\n          category: t.category,\r\n          description: t.description,\r\n          date: new Date(t.created_at),\r\n          user_id: t.user_id\r\n        }));\r\n        \r\n        setTransactions(transactionsWithDates);\r\n      } catch (error) {\r\n        console.error('Error loading transactions:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadTransactions();\r\n  }, [currentUserId]);\r\n\r\n  // Sort transactions by date (newest first)\r\n  const sortedTransactions = [...transactions].sort((a, b) => \r\n    new Date(b.date).getTime() - new Date(a.date).getTime()\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"finance-page\">\r\n        <div className=\"finance-header\">\r\n          <h1>Finance Dashboard</h1>\r\n          <p>Loading your financial data...</p>\r\n        </div>\r\n        <div className=\"finance-content\">\r\n          <div style={{ textAlign: 'center', padding: '40px' }}>\r\n            <div className=\"loading-spinner\">Loading...</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"finance-page\">\r\n      <div className=\"finance-header\">\r\n        <h1>Finance Dashboard</h1>\r\n        <p>Track your financial health and spending patterns</p>\r\n      </div>\r\n      \r\n      <div className=\"finance-content\">\r\n        <FinancialStats transactions={transactions} />\r\n        \r\n        <div className=\"transactions-section\">\r\n          <h2>Recent Transactions</h2>\r\n          {sortedTransactions.length > 0 ? (\r\n            <div className=\"transactions-list\">\r\n              {sortedTransactions.map((transaction) => (\r\n                <div key={transaction.id} className={`transaction-item ${transaction.type}`}>\r\n                  <div className=\"transaction-icon\">\r\n                    {transaction.type === 'income' ? (\r\n                      <TrendingUp size={20} />\r\n                    ) : (\r\n                      <DollarSign size={20} />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"transaction-details\">\r\n                    <div className=\"transaction-description\">{transaction.description}</div>\r\n                    <div className=\"transaction-category\">{transaction.category}</div>\r\n                    <div className=\"transaction-date\">\r\n                      <Calendar size={14} />\r\n                      {new Date(transaction.date).toLocaleDateString()}\r\n                    </div>\r\n                  </div>\r\n                  <div className={`transaction-amount ${transaction.type}`}>\r\n                    {transaction.type === 'income' ? '+' : '-'}${transaction.amount.toFixed(2)}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"no-transactions\">\r\n              <p>No transactions recorded yet. Start by telling ANITA about your income or expenses!</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinancePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}